{
  "dev": true,
  "layout": "form",
  "title": "Task",
  "table": "{schema}.schedule",
  "caption": ["","Schedule","Schedules"],
  "actions": "BIUD",
  "onecolumn": true,
  "popup": [900,800],
  "onsqlinserted": @importstr("Schedule.nextDate.server.js"),
  "onsqlupdated": @importstr("Schedule.nextDate.server.js"),
  "fields": [
    {"name":"schedule_id", "caption":"ID", "control": "textbox_VS"},
    {"name":"schedule_name", "caption":"Task Name"},
    {"name":"schedule_desc", "caption":"Desc"},
    {"name":"schedule_sts", "caption":"Status", "validate": ["Required"], "default": "ACTIVE"},
    {"name":"schedule_start_tstmp", "caption":"Start Dt","format":["date","MM/DD/YYYY h:mm:ss A"], "default": "js:new Date()", "type": "datetime"},
    {"name":"schedule_rrule", "caption":"Recur Rule", "control": "textbox_VL","validate":["jsHarmonySchedulerRRULE"]},
    {"name":"schedule_rrule_info", "nl": false, "caption":"", "control": "html", "value":"<a href='#' onclick='<%-js(\"XExt.Alert(jsh.$root('.'+xmodel.class+'_info_recur').html(), null, { escapeHTML: false, style: 'width:800px;' });\")%>; return false;'><img src='/images/icon_help.png' style='position:relative;top:2px;height:16px' /></a>"},
    {"name":"schedule_rdate", "caption":"Recur Dates", "control": "textbox_L","validate":["jsHarmonySchedulerRDATE"]},
    {"name":"schedule_rdate_info", "nl": false, "caption":"", "control": "html", "value":"<a href='#' onclick='<%-js(\"XExt.Alert(jsh.$root('.'+xmodel.class+'_info_rdate').html(), null, { escapeHTML: false, style: 'width:800px;' });\")%>; return false;'><img src='/images/icon_help.png' style='position:relative;top:2px;height:16px' /></a>"},
    {"name":"schedule_exrule", "caption":"Recur Ex Rule", "control": "textbox_VL","validate":["jsHarmonySchedulerRRULE"]},
    {"name":"schedule_exrule_info", "nl": false, "caption":"", "control": "html", "value":"<a href='#' onclick='<%-js(\"XExt.Alert(jsh.$root('.'+xmodel.class+'_info_recur').html(), null, { escapeHTML: false, style: 'width:800px;' });\")%>; return false;'><img src='/images/icon_help.png' style='position:relative;top:2px;height:16px' /></a>"},
    {"name":"schedule_exdate", "caption":"Recur Ex Dates", "control": "textbox_L","validate":["jsHarmonySchedulerRDATE"]},
    {"name":"schedule_exdate_info", "nl": false, "caption":"", "control": "html", "value":"<a href='#' onclick='<%-js(\"XExt.Alert(jsh.$root('.'+xmodel.class+'_info_rdate').html(), null, { escapeHTML: false, style: 'width:800px;' });\")%>; return false;'><img src='/images/icon_help.png' style='position:relative;top:2px;height:16px' /></a>"},
    {"name":"schedule_next_tstmp", "caption":"Next Run", "actions": "B","format":["date","MM/DD/YYYY h:mm:ss A"]},
    {"name":"schedule_upcoming", "nl": false, "caption":"", "control": "html", "value":"<a href='#' onclick='<%-js(\"if (jsh.XPage.GetChanges().length) return XExt.Alert('Please save all changes before viewing upcoming dates'); XForm.Get(jsh._BASEURL+'_funcs/jsHarmonyScheduler/schedule/'+xmodel.get('schedule_id')+'/upcoming', { }, { }, function (rslt){ if(!rslt || !rslt._success) return XExt.Alert('Error while loading data'); XExt.Alert('Upcoming dates\\\\n---------------------------\\\\n'+(rslt.upcoming.join('\\\\n')||'N/A')); });\")%>; return false;'><img src='/images/icon_calendar.png' style='position:relative;top:2px;height:16px' /></a>"},
    {"name":"schedule_window", "caption":"Run Window (s)", "default": "86400"},
    {"name":"schedule_timeout", "caption":"Timeout (s)", "control": "textbox_VS", "default": "3600"},
    {"name":"schedule_retry_count", "caption":"Retry Count", "control": "textbox_VS", "default": "0"},
    {"name":"schedule_retry_delay", "caption":"Retry Delay (s)", "control": "textbox_VS", "default": "60"},
    {"name":"schedule_action_type", "caption":"Action Type"},
    {"name":"schedule_action", "caption":"Action", "control": "textarea", "controlstyle": "height:100px; width: 500px;"},
    {"name":"schedule_config", "caption":"Config", "control": "textarea", "format": "json", "controlstyle": "height:100px; width: 500px;", "validate": ["IsJSON"]},
    {"name":"schedule_config_info", "nl": false, "caption":"", "control": "html", "value":"<a href='#' onclick='<%-js(\"XExt.Alert(jsh.$root('.'+xmodel.class+'_info_config').html(), null, { escapeHTML: false, style: 'width:800px;' });\")%>; return false;'><img src='/images/icon_help.png' style='position:relative;vertical-align:top;top:4px;height:16px' /></a>"},
    {"name":"schedule_params", "caption":"Params", "control": "textarea", "format": "json", "controlstyle": "height:100px; width: 500px;", "validate": ["IsJSON"]},
    {"name":"schedule_params_info", "nl": false, "caption":"", "control": "html", "value":"<a href='#' onclick='<%-js(\"XExt.Alert(jsh.$root('.'+xmodel.class+'_info_params').html(), null, { escapeHTML: false, style: 'width:800px;' });\")%>; return false;'><img src='/images/icon_help.png' style='position:relative;vertical-align:top;top:4px;height:16px' /></a>"},
    {"name":"schedule_etstmp", "caption":"Entered", "actions": "B","format":["date","MM/DD/YYYY h:mm A"]},
    {"name":"schedule_euser", "caption":"Entered By", "actions": "B","sqlselect": "jsharmony.my_db_user_fmt(schedule_euser)"},
    {"name":"schedule_mtstmp", "caption":"Modified", "actions": "B","format":["date","MM/DD/YYYY h:mm A"]},
    {"name":"schedule_muser", "caption":"Modified By", "actions": "B","sqlselect": "jsharmony.my_db_user_fmt(schedule_muser)"},
    {"name":"schedule_snotes", "caption":"Notes", "control": "textbox_VL"}
  ]
}